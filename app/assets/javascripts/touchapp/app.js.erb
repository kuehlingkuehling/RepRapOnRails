var touchApp = angular.module('touchApp', ['ngRoute', 'ngTouch', 'ui.bootstrap', 'sticky']);

touchApp.config(['$routeProvider', function($routeProvider, Printer) {
  var resolve_websocket = { data: function(Printer) {
    return Printer.online;
  }}
  
  $routeProvider.
    when('/queue', {
      templateUrl: '<%= asset_path("touchapp/templates/queue.html") %>',
      controller: 'QueueController',
      resolve: resolve_websocket
    }).
    when('/configuration', {
      templateUrl: '<%= asset_path("touchapp/templates/configuration.html") %>',
      controller: 'ConfigurationController',
      resolve: resolve_websocket
    }).
    when('/print_check/:printjobId', {
      templateUrl: '<%= asset_path("touchapp/templates/print_check.html") %>',
      controller: 'PrintCheckController',
      resolve: resolve_websocket
    }).   
    when('/print_finished/:printjobId', {
      templateUrl: '<%= asset_path("touchapp/templates/print_finished.html") %>',
      controller: 'PrintFinishedController',
      resolve: resolve_websocket
    }). 
    when('/print_delete/:printjobId', {
      templateUrl: '<%= asset_path("touchapp/templates/print_delete.html") %>',
      controller: 'PrintDeleteController',
      resolve: resolve_websocket
    }). 
    when('/paused/:message', {
      templateUrl: '<%= asset_path("touchapp/templates/paused.html") %>',
      controller: 'PausedController',
      resolve: resolve_websocket
    }).
    when('/autolevel_fail', {
      templateUrl: '<%= asset_path("touchapp/templates/autolevel_fail.html") %>',
      controller: 'AutolevelFailController',
      resolve: resolve_websocket
    }).    
    when('/manualcontrol', {
      templateUrl: '<%= asset_path("touchapp/templates/manualcontrol.html") %>',
      controller: 'ManualcontrolController',
      resolve: resolve_websocket
    }).    
    when('/setup', {
      templateUrl: '<%= asset_path("touchapp/templates/setup.html") %>',
      controller: 'SetupController'
    }). 
    when('/log', {
      templateUrl: '<%= asset_path("touchapp/templates/log.html") %>',
      controller: 'LogController',
      resolve: resolve_websocket
    }).    
    otherwise({
      redirectTo: '/queue'
    });
}]);