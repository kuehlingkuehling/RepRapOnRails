var touchApp = angular.module('touchApp', ['ngRoute', 'ngTouch', 'ui.bootstrap']);

touchApp.config(['$routeProvider', function($routeProvider, MyWebsocket) {
  var resolve_websocket = { data: function(MyWebsocket) {
    return MyWebsocket.online;
  }}
  
  $routeProvider.
    when('/queue', {
      templateUrl: '<%= asset_path("touchapp/templates/queue.html") %>',
      controller: 'QueueController',
      resolve: resolve_websocket
    }).
    when('/configuration', {
      templateUrl: '<%= asset_path("touchapp/templates/configuration.html") %>',
      controller: 'ConfigurationController',
      resolve: resolve_websocket
    }).
    when('/print_check/:printjobId', {
      templateUrl: '<%= asset_path("touchapp/templates/print_check.html") %>',
      controller: 'PrintCheckController',
      resolve: resolve_websocket
    }).   
    when('/print_finished/:printjobId', {
      templateUrl: '<%= asset_path("touchapp/templates/print_finished.html") %>',
      controller: 'PrintFinishedController',
      resolve: resolve_websocket
    }). 
    when('/print_delete/:printjobId', {
      templateUrl: '<%= asset_path("touchapp/templates/print_delete.html") %>',
      controller: 'PrintDeleteController',
      resolve: resolve_websocket
    }). 
    when('/out_of_filament/:spool', {
      templateUrl: '<%= asset_path("touchapp/templates/out_of_filament.html") %>',
      controller: 'OutOfFilamentController',
      resolve: resolve_websocket
    }).    
    when('/manualcontrol', {
      templateUrl: '<%= asset_path("touchapp/templates/manualcontrol.html") %>',
      controller: 'ManualcontrolController',
      resolve: resolve_websocket
    }).    
    when('/setup', {
      templateUrl: '<%= asset_path("touchapp/templates/setup.html") %>',
      controller: 'SetupController'
    }). 
    when('/log', {
      templateUrl: '<%= asset_path("touchapp/templates/log.html") %>',
      controller: 'LogController',
      resolve: resolve_websocket
    }).    
    when('/wizard_leveling', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_leveling.html") %>',
      controller: 'WizardLevelingController',
      resolve: resolve_websocket
    }).        
    when('/wizard_select_filament', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_select_filament.html") %>',
      controller: 'WizardSelectFilamentController',
      resolve: resolve_websocket
    }).        
    when('/wizard_unload_filament', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_unload_filament.html") %>',
      controller: 'WizardUnloadFilamentController',
      resolve: resolve_websocket
    }).         
    when('/wizard_load_filament', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_load_filament.html") %>',
      controller: 'WizardLoadFilamentController',
      resolve: resolve_websocket
    }).             
    when('/wizard_priming', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_priming.html") %>',
      controller: 'WizardPrimingController',
      resolve: resolve_websocket
    }). 
    when('/wizard_calibrate_extrusion', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_calibrate_extrusion.html") %>',
      controller: 'WizardCalibrateExtrusionController',
      resolve: resolve_websocket
    }).  
    when('/wizard_calibrate_offset', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_calibrate_offset.html") %>',
      controller: 'WizardCalibrateOffsetController',
      resolve: resolve_websocket
    }).      
    when('/wizard_regular_maintenance', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_regular_maintenance.html") %>',
      controller: 'WizardRegularMaintenanceController',
      resolve: resolve_websocket
    }).  
    when('/wizard_nozzle_change', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_nozzle_change.html") %>',
      controller: 'WizardNozzleChangeController',
      resolve: resolve_websocket
    }).  
    when('/wizard_calibrate_backlash', {
      templateUrl: '<%= asset_path("touchapp/templates/wizard_calibrate_backlash.html") %>',
      controller: 'WizardCalibrateBacklashController',
      resolve: resolve_websocket
    }).      
    otherwise({
      redirectTo: '/queue'
    });
}]);